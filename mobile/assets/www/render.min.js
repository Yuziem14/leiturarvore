const main=document.getElementsByTagName("main")[0],area=document.getElementById("area"),btnNext=document.getElementById("btnNext"),btnPrevious=document.getElementById("btnPrevious");let rendition=null;function _getWidth(){return computedWidth=main.offsetWidth-16,computedWidth>900?900:computedWidth}function _getHeight(){return computedHeight=.66*_getWidth(),computedHeight>600?600:computedHeight}function parseUrlParams(t){return t.split("?")[1].split("&").reduce((t,e)=>{const[i,n]=e.split("=");return{...t,[i]:n}},{})}function init(){const{path:t}=parseUrlParams(window.location.toString());t&&(area.style.width=_getWidth(),area.style.height=_getHeight(),openBook(t,{width:_getWidth(),height:_getHeight()}))}function openBook(t,{flow:e,width:i,height:n}){let o=ePub(t).renderTo("area",{flow:e||"auto",width:i,height:n});o.display().then(()=>{rendition=o})}function next(){rendition&&rendition.next()}function previous(){rendition&&rendition.prev()}btnNext.addEventListener("click",next),btnPrevious.addEventListener("click",previous),window.addEventListener("resize",()=>{const t=_getWidth(),e=_getHeight();null!==rendition&&rendition.resize(t,e),area.style.width=t,area.style.height=e}),init();